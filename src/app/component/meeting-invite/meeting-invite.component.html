<ng-container *ngIf="vm() as vm">
  <div>
    <h1>{{ vm.title }}</h1>
    <ul>
      <li class="mb-1 flex flex-row justify-stretch">
        <!-- circled_check -->
        <!-- <svg
          class="h-6 w-6 flex-none fill-sky-100 stroke-sky-500 stroke-2"
          stroke-linecap="round"
          stroke-linejoin="round">
          <circle cx="12" cy="12" r="11" />
          <path d="m8 13 2.165 2.165a1 1 0 0 0 1.521-.126L16 9" fill="none" />
        </svg> -->
        <div>
          <svg
            class="fill-sky-100 stroke-sky-500 justify-self-auto"
            xmlns="http://www.w3.org/2000/svg"
            width="20"
            height="20"
            viewBox="0 0 25 25"
            fill="none">
            <path
              d="M12.5 6.5V12.5L16.5 14.5M22.5 12.5C22.5 18.0228 18.0228 22.5 12.5 22.5C6.97715 22.5 2.5 18.0228 2.5 12.5C2.5 6.97715 6.97715 2.5 12.5 2.5C18.0228 2.5 22.5 6.97715 22.5 12.5Z"
              stroke="var(--appointment_widgets-light-text-color)"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"></path>
          </svg>
        </div>
        <div class="ml-2">
          <p>
            <span>{{ vm.meeting?.duration?.value }}&nbsp;</span>
            <span>{{ vm.meeting?.duration?.unit }}</span>
            <span *ngIf="formGroup.controls['date'].value"
              >&nbsp;on&nbsp;{{
                formGroup.controls['date'].value | date: 'MMM d, yyyy'
              }}</span
            >
            <span *ngIf="formGroup.controls['time'].value"
              >&nbsp;at&nbsp;{{ formGroup.controls['time'].value }}
              <span *ngIf="formGroup.controls['zone'].value"
                >&nbsp;{{ formGroup.controls['zone'].value }}</span
              >
            </span>
          </p>
        </div>
      </li>
      <li class="flex mb-1">
        <div>
          <svg
            class="fill-sky-100 stroke-sky-500 justify-self-stretch"
            xmlns="http://www.w3.org/2000/svg"
            width="20"
            height="20"
            viewBox="0 0 25 25"
            fill="none">
            <path
              d="M12.5 2.83301C15.0013 5.57136 16.4228 9.12504 16.5 12.833C16.4228 16.541 15.0013 20.0947 12.5 22.833M12.5 2.83301C9.99872 5.57136 8.57725 9.12504 8.5 12.833C8.57725 16.541 9.99872 20.0947 12.5 22.833M12.5 2.83301C6.97715 2.83301 2.5 7.31016 2.5 12.833C2.5 18.3559 6.97715 22.833 12.5 22.833M12.5 2.83301C18.0228 2.83301 22.5 7.31016 22.5 12.833C22.5 18.3559 18.0228 22.833 12.5 22.833M3.00002 9.83301H22M3 15.833H22"
              stroke="var(--appointment_widgets-light-text-color)"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"></path>
          </svg>
        </div>
        <div class="ml-2 justify-self-stretch">
          <p>
            {{ vm.meeting?.timezone }}
          </p>
        </div>
      </li>
      <li class="flex">
        <div>
          <svg
            class="fill-sky-100 stroke-sky-500 justify-self-stretch"
            xmlns="http://www.w3.org/2000/svg"
            width="18"
            height="18"
            viewBox="0 0 18 18"
            fill="none">
            <path
              d="M2.25 9H15.75M2.25 4.5H15.75M2.25 13.5H11.25"
              stroke="var(--appointment_widgets-light-text-color)"
              stroke-width="1.5"
              stroke-linecap="round"
              stroke-linejoin="round"></path>
          </svg>
        </div>
        <div class="ml-2 justify-self-stretch">
          <p>
            {{ vm.meeting?.note }}
          </p>
        </div>
      </li>
    </ul>
  </div>
  <form [formGroup]="formGroup">
    <div>
      <mat-tab-group #tabGroup>
        <mat-tab label="Day">
          <div class="flex">
            <p-calendar
              class="max-w-full"
              formControlName="date"
              [disabledDates]="disabledDates"
              [inline]="true"
              [maxDate]="vm.meeting?.latestDate ?? getDate()"
              [minDate]="vm.meeting?.earliestDate ?? getDate()"></p-calendar>
          </div>
          <!-- <div>Timezone</div>
    <mat-form-field
      appearance="outline"
      class="mt-2 mb-5"
      subscriptSizing="dynamic">
      <mat-label>Meeting Date</mat-label>
      <input
        [formControl]="dayFormControl"
        matInput
        placeholder="Name"
        type="text" />
    </mat-form-field> -->
        </mat-tab>
        <mat-tab label="Time" [disabled]="!formGroup.controls['date'].value">
          <div class="mt-3">
            <ul>
              <li
                *ngIf="availableTimesOfSelectedDay?.length === 0"
                class="flex outline outline-1 outline-slate-400 rounded p-3 hover:text-sky-600 m-2 mt-3 vertical-center">
                <p class="mb-0">
                  I'm all booked that day. Please choose another.
                </p>
              </li>
              @for (time of availableTimesOfSelectedDay; track $index) {
                <li class="flex m-1 overflow-clip p-1">
                  <!-- <pre>time.selected: {{ time.selected }}</pre> -->
                  <button
                    [@childAnimation]="
                      time.selected ? 'selectedHalf' : 'unselectedFull'
                    "
                    (click)="selectTime(time)"
                    class="outline outline-1 outline-slate-400 rounded p-3 hover:text-sky-600"
                    style="width: 100%">
                    {{ time.value }}
                  </button>
                  <button
                    *ngIf="time.selected"
                    [@childAnimation]="
                      time.selected ? 'selectedHalfConfirm' : ''
                    "
                    (click)="sendRequest()"
                    class="outline outline-1 outline-slate-400 rounded p-3 hover:text-sky-600 ml-2"
                    style="width: 0%">
                    Confirm</button
                  ><!--
                  [style.display]="time.selected ? 'unset' : 'none'"-->
                </li>
              }
              <li class="mt-4 mx-2">
                <mat-form-field
                  appearance="outline"
                  style="width: 100%"
                  subscriptSizing="dynamic">
                  <mat-label>Timezone</mat-label>
                  <mat-select formControlName="zone">
                    <mat-option
                      *ngFor="let timezone of timezoneOptions"
                      [value]="timezone"
                      (click)="selectTimezone(timezone)">
                      {{ timezone }}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </li>
            </ul>
          </div>
        </mat-tab>
      </mat-tab-group>
    </div>
    <!--
    <div class="flex justify-center mt-3 mx-3"> -->
    <!-- <button
        [disabled]="!formGroup.controls['time'].value"
        style="width: 100%"
        type="button"
        mat-raised-button
        color="primary"
        (click)="sendRequest()">
        Send</button
      > --><!--
      [disabled]="!formGroup.valid" --><!--
    </div> -->
  </form>
</ng-container>
<!-- TODO: optionally request email address so that we can send invitation and process reminder notification -->
